<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from robot.urdf.xacro               | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="robot">
  <!-- Specify some standard inertial calculations https://en.wikipedia.org/wiki/List_of_moments_of_inertia -->
  <!-- These make use of xacro's mathematical functionality -->
  <material name="white">
    <color rgba="1 1 1 1"/>
  </material>
  <material name="orange">
    <color rgba="1 0.3 0.1 1"/>
  </material>
  <material name="blue">
    <color rgba="0.2 0.2 1 1"/>
  </material>
  <material name="black">
    <color rgba="0 0 0 1"/>
  </material>
  <!-- BASE LINK -->
  <link name="base_link">

    </link>
  <!-- CHASSIS LINK -->
  <joint name="base_plate_joint" type="fixed">
    <parent link="base_link"/>
    <child link="base_plate"/>
    <origin xyz="0 0 0.25"/>
  </joint>
  <link name="base_plate">
    <visual>
      <origin xyz="0 0 0"/>
      <geometry>
        <box size="0.25 0.15 0.05"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <box size="0.25 0.15 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="2"/>
      <inertia ixx="0.004166666666666667" ixy="0.0" ixz="0.0" iyy="0.010833333333333334" iyz="0.0" izz="0.014166666666666664"/>
    </inertial>
  </link>
  <!-- STEERING SHAFT LINK -->
  <joint name="steering_shaft_joint" type="revolute">
    <parent link="base_plate"/>
    <child link="steering_shaft"/>
    <origin rpy="0 0 0" xyz="0 0 -0.025"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="1.0" friction="0.3"/>
    <limit effort="1000" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="6.283185307179586"/>
  </joint>
  <link name="steering_shaft">
    <visual>
      <origin xyz="0 0 -0.0625"/>
      <geometry>
        <cylinder length="0.125" radius="0.025"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.0007291666666666667" ixy="0.0" ixz="0.0" iyy="0.0007291666666666667" iyz="0.0" izz="0.00015625000000000003"/>
    </inertial>
  </link>
  <!-- STEERING WHEEL LEFT LINK -->
  <joint name="steering_wheel_left_joint" type="continuous">
    <parent link="steering_shaft"/>
    <child link="steering_wheel_left"/>
    <origin rpy="0 1.5707963267948966 0" xyz="-0.11 0 -0.125"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.01" friction="0.01"/>
    <limit effort="1000" velocity="1"/>
  </joint>
  <link name="steering_wheel_left">
    <visual>
      <geometry>
        <cylinder length="0.04" radius="0.1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.04" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1.5"/>
      <inertia ixx="0.00395" ixy="0.0" ixz="0.0" iyy="0.00395" iyz="0.0" izz="0.0075000000000000015"/>
    </inertial>
  </link>
  <joint name="steering_wheel_right_joint" type="continuous">
    <parent link="steering_shaft"/>
    <child link="steering_wheel_right"/>
    <origin rpy="0 1.5707963267948966 0" xyz="0.11 0 -0.125"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.01" friction="0.01"/>
    <limit effort="1000" velocity="1"/>
  </joint>
  <link name="steering_wheel_right">
    <visual>
      <geometry>
        <cylinder length="0.04" radius="0.1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.04" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1.5"/>
      <inertia ixx="0.00395" ixy="0.0" ixz="0.0" iyy="0.00395" iyz="0.0" izz="0.0075000000000000015"/>
    </inertial>
  </link>
  <!--

    <joint name="steering_wheel_joint" type="continuous">
        <parent link="steering_shaft"/>
        <child link="steering_wheel"/>
        <origin xyz="0 0 -0.125" rpy="0 ${pi/2} 0" />
        <axis xyz="0 0 1"/>
        <dynamics damping="1.0" friction="1.0"/>
        <limit effort="1000" velocity="10"/>
        
    </joint>

    <link name="steering_wheel">
        <visual>
            <geometry>
                <cylinder radius="0.1" length="0.21"/>
            </geometry>
            <material name="blue"/>
        </visual>
        <collision>
            <geometry>
                <cylinder radius="0.1" length="0.21"/>
            </geometry>
        </collision>
        <gazebo>
            <material>Gazebo/Blue</material>
            <mu1>0.9</mu1>
            <mu2>0.9</mu2>
            <kp>1000000.0</kp>
            <kd>1.0</kd>
        </gazebo>
            
            
        <xacro:inertial_cylinder mass="3" length="0.21" radius="0.1">
            <origin xyz="0 0 0" rpy="0 0 0"/>
        </xacro:inertial_cylinder>
    </link>
-->
  <!-- LINEAR ACTUATOR LINK -->
  <joint name="linear_actuator_joint" type="prismatic">
    <parent link="base_plate"/>
    <child link="linear_actuator"/>
    <origin xyz="0 0 0.025"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="1.0" friction="1.0"/>
    <limit effort="5000" lower="0" upper="0.12" velocity="0.07"/>
  </joint>
  <link name="linear_actuator">
    <visual>
      <origin xyz="0 0 0.1"/>
      <geometry>
        <box size="0.07 0.15 0.2"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.1"/>
      <geometry>
        <box size="0.07 0.15 0.2"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0.1"/>
      <mass value="2"/>
      <inertia ixx="0.010416666666666666" ixy="0.0" ixz="0.0" iyy="0.007483333333333335" iyz="0.0" izz="0.004566666666666667"/>
    </inertial>
  </link>
  <!-- FRAME BOX LINK -->
  <joint name="frame_box_joint" type="fixed">
    <parent link="linear_actuator"/>
    <child link="frame_box"/>
    <origin xyz="0 0.18 -0.075"/>
    <dynamics damping="1.0" friction="1.0"/>
  </joint>
  <link name="frame_box">
    <visual>
      <geometry>
        <box size="0.54 0.15 0.3"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.54 0.15 0.3"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="20"/>
      <inertia ixx="0.18749999999999997" ixy="0.0" ixz="0.0" iyy="0.636" iyz="0.0" izz="0.5235000000000001"/>
    </inertial>
  </link>
  <!-- LEFT FORK LINK -->
  <joint name="left_fork_joint" type="fixed">
    <parent link="frame_box"/>
    <child link="left_fork"/>
    <origin xyz="-0.19 0.08 -0.125"/>
  </joint>
  <link name="left_fork">
    <visual>
      <origin xyz="0 0.350 0"/>
      <geometry>
        <box size="0.16 0.7 0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin xyz="0 0.350 0"/>
      <geometry>
        <box size="0.16 0.7 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.350 0"/>
      <mass value="10"/>
      <inertia ixx="0.4104166666666666" ixy="0.0" ixz="0.0" iyy="0.023416666666666665" iyz="0.0" izz="0.4296666666666666"/>
    </inertial>
  </link>
  <!-- RIGHT FORK LINK -->
  <joint name="right_fork_joint" type="fixed">
    <parent link="frame_box"/>
    <child link="right_fork"/>
    <origin xyz="0.19 0.08 -0.125"/>
  </joint>
  <link name="right_fork">
    <visual>
      <origin xyz="0 0.350 0"/>
      <geometry>
        <box size="0.16 0.7 0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin xyz="0 0.350 0"/>
      <geometry>
        <box size="0.16 0.7 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.350 0"/>
      <mass value="10"/>
      <inertia ixx="0.4104166666666666" ixy="0.0" ixz="0.0" iyy="0.023416666666666665" iyz="0.0" izz="0.4296666666666666"/>
    </inertial>
  </link>
  <!-- FORK WHEEL LEFT LINK -->
  <joint name="fork_wheel_left_joint" type="continuous">
    <parent link="base_plate"/>
    <child link="fork_wheel_left"/>
    <origin rpy="0 1.5707963267948966 0" xyz="-0.19 1.150 -0.2175"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>
  <link name="fork_wheel_left">
    <visual>
      <geometry>
        <cylinder length="0.07" radius="0.0325"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.07" radius="0.0325"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.00020171875000000002" ixy="0.0" ixz="0.0" iyy="0.00020171875000000002" iyz="0.0" izz="0.00015843750000000002"/>
    </inertial>
  </link>
  <!--896 mm i y till yttersta forkwheel, diameter pÃ¥ fork wheels 65 mm, bredd-->
  <!-- FORK WHEEL RIGHT LINK -->
  <joint name="fork_wheel_right_joint" type="continuous">
    <parent link="base_plate"/>
    <child link="fork_wheel_right"/>
    <origin rpy="0 1.5707963267948966 0" xyz="0.19 1.150 -0.2175"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>
  <link name="fork_wheel_right">
    <visual>
      <geometry>
        <cylinder length="0.07" radius="0.0325"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.07" radius="0.0325"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.00020171875000000002" ixy="0.0" ixz="0.0" iyy="0.00020171875000000002" iyz="0.0" izz="0.00015843750000000002"/>
    </inertial>
  </link>
  <gazebo reference="steering_wheel_right">
    <material>Gazebo/Black</material>
    <mu1 value="0.9"/>
    <mu2 value="0.9"/>
  </gazebo>
  <gazebo reference="steering_wheel_left">
    <material>Gazebo/Black</material>
    <mu1 value="0.9"/>
    <mu2 value="0.9"/>
  </gazebo>
  <gazebo reference="fork_wheel_left">
    <material>Gazebo/Blue</material>
    <mu1 value="0.9"/>
    <mu2 value="1.0"/>
  </gazebo>
  <gazebo reference="fork_wheel_right">
    <material>Gazebo/Blue</material>
    <mu1 value="0.9"/>
    <mu2 value="1.0"/>
  </gazebo>
  <gazebo reference="frame_box">
    <material>Gazebo/Red</material>
  </gazebo>
  <!-- TRANSMISSIONS FOR ROS CONTROL -->
  <!-- STEERING SHAFT -->
  <!-- STEERING WHEEL-->
  <!-- Rear WHeels -->
  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="diff_drive">
      <!-- WHeel information-->
      <left_joint>steering_wheel_right_joint</left_joint>
      <right_joint>steering_wheel_left_joint</right_joint>
      <wheel_separation>0.22</wheel_separation>
      <wheel_diameter>0.2</wheel_diameter>
      <!-- LIMITS-->
      <max_wheel_torque>28</max_wheel_torque>
      <!--<max_wheel_acceleration>0.01</max_wheel_acceleration>-->
      <linear_velocity_limit>0.01</linear_velocity_limit>
      <!--OUTPUT-->
      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>base_link</robot_base_frame>
      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>
      <publish_wheel_tf>true</publish_wheel_tf>
    </plugin>
  </gazebo>
</robot>
